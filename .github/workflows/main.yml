name: Pandoc Build Site

on:
  push:
  workflow_dispatch:

jobs:
  build-site:
    runs-on: ubuntu-latest
    steps:
     - name: Checkout repo content
       uses: actions/checkout@v3
     - name: Setup pandoc
       uses: r-lib/actions/setup-pandoc@v2
       with:
         pandoc-version: '2.14.1'
     - name: Setup python3
       uses: actions/setup-python@v4
     - name: Execute blog.py script
       run: |
         python blog.py
     - name: Commit changes
       uses: EndBug/add-and-commit@v9
       with:
        author_name: GitHub Action(automated)
        author_email: me+auto@benboyle.ca
        message: 'build site'
        add: './*'
        push: true
